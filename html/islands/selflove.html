<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Island of Self-Love</title>
  <link rel="stylesheet" href="../../css/style_island_selflove.css" />
</head>
<body>
    <div class="world">
    <!-- Insel (falls extra Bild) -->
    <img src="../../images/island-selflove-main.png" alt="Heart Island" class="island">

    <!-- Titel (kann auch als Bild sein) -->
    <img src="../../images/insel1_schrift.png" alt="Island of Self-Love" class="title-text">

     <!-- Logo oben rechts -->
    <img src="../../images/lumora-logo.png" alt="Lumora" class="logo">

    </div>
  <div class="screen">

   

    <!-- Lightpoints oben links
    <div class="lightpoints">
      <span>Lightpoints:</span>
      <span class="lp-value">3</span>
      <img src="img/icon-sun.png" alt="Sun Icon" class="lp-icon">
    </div>
 -->


    <!-- Linke Item-Box -->
    <div class="items-panel">
      <div class="items-header">Items:</div>

      <div class="item-row">
        <img src="../../images/item-house-selflove.png" alt="House" class="item-img">
        <span class="item-count">1</span>
        <img src="../../images/lightpoint-icon.png" alt="Sun Icon" class="item-sun">
      </div>

      <div class="item-row">
        <img src="../../images/item-tree-selflove.png" alt="Tree" class="item-img">
        <span class="item-count">1</span>
        <img src="../../images/lightpoint-icon.png" alt="Sun Icon" class="item-sun">
      </div>
    </div>

    <!-- Back-Button unten links -->
    <button class="btn-back">Back</button>

    <!-- Rechte Task-Box -->
    <div class="tasks-panel">
      <div class="tasks-header">Leftover Tasks: <span>3</span></div>
      <button class="btn-start">Start task</button>
    </div>

    <!-- Help unten rechts -->
    <div class="help-area">
      <img src="img/drop-help.png" alt="Help Drop" class="help-icon">
      <div class="help-text">Need help?</div>
    </div>

  </div>
  <script>
async function startTask(category = "") {
  const url = category ? `../php/start_task.php?category=${encodeURIComponent(category)}` : `../php/start_task.php`;
  const res = await fetch(url);
  const data = await res.json();

  if (!res.ok) {
    alert(data.error || "Could not start task");
    return;
  }

  // Hier Task-Popup füllen
  document.querySelector("#taskTitle").textContent = data.title;
  document.querySelector("#taskDesc").textContent = data.description;

  // quest_id merken fürs Done
  window.activeQuestId = data.id;

  openTaskModal(); // deine bestehende Funktion / oder UI anzeigen
}

async function completeTask() {
  if (!window.activeQuestId) return;

  const res = await fetch("../php/complete_task.php", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ quest_id: window.activeQuestId })
  });

  const data = await res.json();
  if (!res.ok) {
    alert(data.error || "Could not complete task");
    return;
  }

  // UI: Lightpoints aktualisieren
  document.querySelector("#lightpointsValue").textContent = data.total_lightpoints;

  // Danach am einfachsten: Seite neu laden, damit Inseln-locked/unlocked korrekt neu gerendert werden
  // (oder du hast eine renderIslands() Funktion)
  window.location.reload();
}
</script>

</body>
</html>
